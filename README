Fonctionnement
- une mélodie = cycle de x temps, un ensemble de notes
- une note ajoutée à chaque cycle de génération : n fils qui attendent m votes chacun, le meilleur fils donne la prochaine génération
- mutation pour certain fils sur les notes existantes
- la plupart du temps 1 note chaque 4 temps, parfois 1 / 2 temps, rarement 1/1 temps, parfois 1 note après 8 temps
- une note dans une mélodie : sa hauteur, sa position dans le cycle
- ajouter une note à la suite, la longueur de la musique évolue au fur et à mesure jusqu'à un certain max
- s'arrêter à un certain rang r de génération

- plusieurs phases : construction de la mélodie. Ajout de son d'ambiance (basse), ajout de beats

- Utiliser jsfx
  samples:
  -> notes: http://egonelbre.com/js/jsfx/index.html?load=[%22synth%22,0.0000,0.4000,0.1000,0.3000,1.3260,0.2240,20.0000,804.0000,2000.0000,0.0000,0.0000,0.0000,18.0063,0.0003,0.0000,0.0000,0.1000,0.0000,0.0000,0.0000,0.0000,0.0000,0.9890,0.0000,0.0000,0.0000,0.0000]
  -> ambients : http://egonelbre.com/js/jsfx/index.html?load=[%22synth%22,0.0000,0.4000,0.1570,1.0720,0.2700,2.0000,947.0000,270.0000,1464.0000,-0.6780,-0.3100,0.0000,15.9907,-0.2363,0.9860,-0.1160,0.0790,0.1425,0.0000,0.0000,0.5440,-0.5060,0.7190,0.0340,0.2700,0.0000,0.7900]
  -> bass : http://egonelbre.com/js/jsfx/index.html?load=[%22synth%22,0.0000,1.0000,0.0000,0.1040,0.1920,0.1720,20.0000,91.0000,216.0000,-0.6180,0.0120,0.2730,9.8959,0.1134,-0.0180,-0.0720,0.0370,0.1575,-0.0040,0.0000,0.1540,-0.0780,0.9030,-0.8200,0.7790,0.4460,-0.8120]


- Specs, Notes d'implémentation et algorithmes
Une note = un pitch (hauteur), une position (dans le loop)
Une mélodie = un ensemble de notes
Une famille = un arbre de mélodie.
Sur chaque mélodie, on enregistre le nombre de votes positif et négatif.
Chaque niveau de l'arbre représente un ajout d'une note et parfois une ou plusieurs mutations sur les notes existantes. L'arbre s'arrête quand l'algo de génération ne peut plus créer de fils.
Une mélodie a potentiellement n filles mélodies. Mais on ne représente que les branches existantes (raison évidente de place de bdd).
C'est l'utilisateur qui construisent par leurs choix ces branches de mélodie.
A la première visite d'un utilisateur, on choisit une mélodie existante parmi l'arbre d'une famille (si l'état le permet).
Arrivé à un certain stade, on arrête la création de nouvelles branches, et on laisse les utilisateurs voter sur les branches existantes.
On a plus de chance de tomber sur des feuilles. On donne également plus de chances aux feuilles les moins votés pour avoir la meilleure précision.
Une fois qu'on a assez de votes sur chaque feuille, on peut donner le classement des meilleurs mélodies :
Soit en comparant le ratio like / dislike , soit avec like-dislike (à réfléchir)

A tout moment, random redirige sur n'importe quelle noeud, même en plein milieu d'une branche.
Ca permet de limiter le nombre de branches.
Si un utilisateur aime la branche, on avance d'une génération en séléctionant un fils existant (en mode génération: proba d'en créer un nouveau non existant)
Si il n'aime pas : en mode génération: on crée un frère, en mode maturation, on passe à un autre noeud aléatoirement


états de Family (état relatif à melodies) : 
- Generation : c'est l'état initial, il permet aux utilisateurs de choisir leur branche préférée.
- Maturation : cet état bloque la possibilité de créer ses propres branches. Par contre, on vote sur les noeuds existants.
- Dead : La famille est fermé. Il n'est plus possible de voter. On est capable de donner le classement des meilleurs mélodies générées.


TODO :

*** priorité forte

 - Implémenter la partie serveur
Mode random: algo génétique etc..
 - Une page "random" sur laquel on choisi si on aime ou pas, puis rechargement avec une autre mélodie non votée
 - Une page de visualisation des familles de mélodies et de parcours de l'arbre d'évolution (version simple pour l'instant)
 - Timeout sur l'application (10s par exemple) qui remplace le loader par un message d'erreur, et qui informe le serveur d'un probleme. Celui ci log les infos necessaires à sa résolution.

 ** priorité moyenne

 - Ajouter les liens de partages sociaux "share this on twitter, ..."
 - Ajouter les ambients et drums

  * priorité faible
 
 - Internationaliser l'application (fr, en)

Mode création:
 - Une page d'édition de mélodie (valeur des notes au hover)
 - Partage par lien sociaux
 - Classement basé sur le nombre de "like" sociaux
 - modification du timbre des mélodie
